/*
 *  Gridder - v1.4.2
 *  A jQuery plugin that displays a thumbnail grid expanding preview similar to the effect seen on Google Images.
 *  http://www.oriongunning.com/
 *
 *  Made by Orion Gunning
 *  Under MIT License
 */
function trapFocus(e){var n=jQuery(e).find("a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), iframe, object, embed, *[tabindex], *[contenteditable]"),t=n[0],r=n[n.length-1];jQuery(e).on("keydown",function(e){("Tab"===e.key||9===e.keyCode)&&(e.shiftKey?document.activeElement===t&&(r.focus(),e.preventDefault()):document.activeElement===r&&(t.focus(),e.preventDefault()))})}!function(e){var n;window.console=window.console||((n={}).log=n.warn=n.debug=n.info=n.error=n.time=n.dir=n.profile=n.clear=n.exception=n.trace=n.assert=function(){},n),e.fn.extend(e.easing,{def:"easeInOutExpo",easeInOutExpo:function(e,n,t,r,i){return 0===n?t:n===i?t+r:(n/=i/2)<1?r/2*Math.pow(2,10*(n-1))+t:r/2*(2-Math.pow(2,-10*--n))+t}}),e(document).keydown(function(n){var t=n.keyCode,r=e(".currentGridder"),i=r.find(".gridder-show");r.length&&(37===t&&(i.prev().prev().trigger("click"),n.preventDefault()),39===t&&(i.next().trigger("click"),n.preventDefault()))}),e.fn.gridderExpander=function(n){var t=e.extend({},e.fn.gridderExpander.defaults,n);return this.each(function(){var n,r=e(this),i=!1;function d(n){t.scroll&&e("html, body").animate({scrollTop:n.find(".selectedItem").offset().top-t.scrollOffset},{duration:200,easing:t.animationEasing}),r.removeClass("hasSelectedItem"),i=!1,n.find(".selectedItem").removeClass("selectedItem"),n.find(".gridder-show").slideUp(t.animationSpeed,t.animationEasing,function(){n.find(".gridder-show").remove(),t.onClosed(n)}),e(".currentGridder").removeClass("currentGridder")}function o(r,d){var o='<div class="gridder-padding">';if(t.showNav){var a=e(".selectedItem").prev(),s=e(".selectedItem").next().next();o+='<div class="gridder-navigation">',o+='<a href="#" class="gridder-close" title="Uitklapper sluiten" role=\'button\'>'+t.closeText+"</a>",o+='<a href="#" class="gridder-nav prev '+(a.length?"":"disabled")+'" title="Vorige plan" role=\'button\'>'+t.prevText+"</a>",o+='<a href="#" class="gridder-nav next '+(s.length?"":"disabled")+'" title="Volgende plan" role=\'button\'>'+t.nextText+"</a>",o+="</div>"}if(o+='<div class="gridder-expanded-content">',o+=d,o+="</div>",o+="</div>",i?(n.html(o),n.find(".gridder-padding").fadeIn(t.animationSpeed,t.animationEasing,function(){i=!0,e.isFunction(t.onContent)&&t.onContent(n)})):n.hide().append(o).slideDown(t.animationSpeed,t.animationEasing,function(){i=!0,e.isFunction(t.onContent)&&t.onContent(n)}),t.scroll){var l="panel"===t.scrollTo?r.offset().top+r.height()-t.scrollOffset:r.offset().top-t.scrollOffset;e("html, body").animate({scrollTop:l},{duration:t.animationSpeed,easing:t.animationEasing})}n.removeClass("loading"),trapFocus(n)}t.onStart(r),r.on("click",".gridder-list",function(t){t.preventDefault(),function(t){if(e(".currentGridder").removeClass("currentGridder"),r.addClass("currentGridder"),t.hasClass("selectedItem"))d(r);else{r.find(".selectedItem").removeClass("selectedItem"),t.addClass("selectedItem"),r.find(".gridder-show").remove(),r.hasClass("hasSelectedItem")||r.addClass("hasSelectedItem");var i=e('<div class="gridder-show loading"></div>');n=i.insertAfter(t);var a="";0===t.data("griddercontent").indexOf("#")?(a=e(t.data("griddercontent")).html(),o(t,a)):e.ajax({type:"GET",url:t.data("griddercontent"),success:function(e){o(t,a=e)},error:function(e){a=e.responseText,o(t,a)}})}}(e(this))}),r.on("click",".gridder-nav.next",function(n){n.preventDefault(),e(this).parents(".gridder-show").next().trigger("click")}),r.on("click",".gridder-nav.prev",function(n){n.preventDefault(),e(this).parents(".gridder-show").prev().prev().trigger("click")}),r.on("click",".gridder-close",function(e){e.preventDefault(),d(r)})})},e.fn.gridderExpander.defaults={scroll:!0,scrollOffset:30,scrollTo:"panel",animationSpeed:400,animationEasing:"easeInOutExpo",showNav:!0,nextText:"Next",prevText:"Previous",closeText:"Close",onStart:function(){},onContent:function(){},onClosed:function(){}}}(jQuery);
