<style>
{{data.widget.formattedContainerStyles}}
</style>

{% set uniqueId = apos.utils.generateId() %}

<div
  {% if data.widget.htmlId %}
  id="{{data.widget.htmlId}}"
  {% else %}
  id="{{data.widget.containerId}}"
  {% endif %}
  class="section
  {% if data.widget.sectionToggle %}
  {% if data.widget.sectionOpen %}open{% else %}closed{% endif %}
  {% endif %}
  {% if data.widget.mobileToggle %}
  mobileonly
  {% endif %}
  {{data.widget.containerId}}
  {{data.widget.htmlClass}}
  {% if data.widget.marginType === 'up' %} margin-up {% endif %}
  {{data.widget.cssHelperClassesString}}
  "

  style="
  {% if data.widget.backgroundImage %}
  background-image:url({{apos.attachments.url(data.widget.backgroundImage)}});
  -webkit-background-size: cover;
  -moz-background-size: cover;
  -o-background-size: cover;
  background-size: cover;
  {% endif %}
  {% if data.widget.backgroundColor %} background-color: {{data.widget.backgroundColor}}; {% endif %}
  "
>
  {% if data.widget.sectionToggle %}
  <a class="toggle-title" href="javascript: (function() { var id = '#{% if data.widget.htmlId%}{{data.widget.htmlId}}{% else %}{{data.widget.containerId}}{% endif %}'; if( $(id).hasClass('open') ){ $(id).removeClass('open'); $(id).addClass('closed'); $('#{{ uniqueId }}-container').attr('aria-expanded', 'false'); } else { $(id).removeClass('closed'); $(id).addClass('open'); $('#{{ uniqueId }}-container').attr('aria-expanded', 'true'); }   })()"
    title={{data.widget.toggleTitle}}"
    id="{{ uniqueId }}-toggle" aria-controls="{{ uniqueId }}-container"
  >
    {{data.widget.toggleTitle}}
    <img class="arrow" src="{{data.siteUrl}}/modules/openstad-assets/img/{% if data.widget.typeArrow %}{{data.widget.typeArrow}}{% else %}{{'arrow_down_black'}}{% endif %}.svg" width="13" heigh="13" style="display: inline-block; margin-left: 12px;"/>
  </a>
  {% endif %}

  {% if data.widget.displayType === 'full-screen' %}
  {% include 'types/full-screen.html'%}
  {% elseif data.widget.displayType === 'full-width' %}
  {% include 'types/full-width.html'%}
  {% else %}

  <div class="container u-small-dropdowns"

    {% if data.widget.sectionToggle %}
       id="{{ uniqueId }}-container"
       aria-expanded="{% if data.widget.sectionOpen %}true{% else %}false{% endif %}"
    {% endif %}
  >
    {% if data.widget.displayType %}
    {% include 'types/' + data.widget.displayType + '.html'%}
    {% endif %}
  </div>
{% endif %}
</div>
